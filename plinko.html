<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riskit.com Plinko</title>
    <style>
        /* Modern styling matching slots.html */
        body {
            background-color: #1a2c3a;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .container {
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .balance-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .balance {
            font-size: 1.5em;
            font-weight: bold;
            color: #4CAF50;
        }

        .plinko-board-container {
            margin: 40px 0;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        #plinkoBoard {
            background-color: #1a2c3a;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .bet-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        input {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #555;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            margin: 10px;
        }

        input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            cursor: pointer;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .win {
            color: #4CAF50;
            font-size: 1.2em;
            font-weight: bold;
        }

        .lose {
            color: #f44336;
            font-size: 1.2em;
        }

        .rules {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .rules h2 {
            color: #4CAF50;
            margin-bottom: 15px;
        }

        .rules p {
            margin: 8px 0;
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            #plinkoBoard {
                width: 300px !important;
                height: 450px !important;
            }

            h1 {
                font-size: 2em;
            }

            button {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü™ê Riskit.com Plinko ü™ê</h1>

        <div class="balance-section">
            <p>Balance: $<span class="balance" id="balance">10000.00</span></p>
        </div>

        <div class="plinko-board-container">
            <canvas id="plinkoBoard" width="400" height="600"></canvas>
        </div>

        <div class="bet-section">
            <input type="number" id="betAmount" placeholder="Enter bet amount" min="1">
            <button onclick="placeBet()">ü™ê Place Bet ü™ê</button>
        </div>

        <div class="results" id="result">
            <p>Place your bet and watch the ball fall!</p>
        </div>
    </div>

    <div class="rules">
        <h2>üìã Rules:</h2>
        <p>1. üéØ Place your bet amount</p>
        <p>2. ü™ê Click "Place Bet" to drop the ball</p>
        <p>3. üí∞ Watch the ball bounce through the pegs</p>
        <p>4. üèÜ Land on higher multipliers to win more!</p>
        <p>5. ‚ùå Different slots have different payouts</p>
    </div>

    <script>
        const canvas = document.getElementById('plinkoBoard');
        const ctx = canvas.getContext('2d');
        const rows = 10;
        const cols = 9;
        const pegRadius = 5;
        const ballRadius = 10;
        const multipliers = [5, 2, 1.5, 1, 0.5, 0, 0.5, 1, 1.5, 2, 5];
        let balance = 10000;
        let pegs = [];

        function updateBalance() {
            document.getElementById('balance').innerText = `Balance: $${balance.toFixed(2)}`;
        }

        function drawBoard() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw pegs
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols - (i % 2); j++) {
                    ctx.beginPath();
                    ctx.arc(
                        (j * canvas.width) / (cols - 1) + ((i % 2) * canvas.width) / (cols * 2),
                        (i * canvas.height) / rows,
                        pegRadius,
                        0,
                        2 * Math.PI
                    );
                    ctx.fillStyle = '#b1bad3';
                    ctx.fill();
                    ctx.closePath();
                }
            }

            // Draw multiplier slots
            ctx.font = '14px Arial';
            ctx.fillStyle = '#ffffff';
            ctx.textAlign = 'center';
            for (let i = 0; i < multipliers.length; i++) {
                let x = (i * canvas.width) / (multipliers.length - 1);
                ctx.fillText(`${multipliers[i]}x`, x, canvas.height - 10);
            }
        }

        function placeBet() {
            const betAmount = parseFloat(document.getElementById('betAmount').value);
            if (isNaN(betAmount) || betAmount <= 0) {
                alert('Please enter a valid bet amount.');
                return;
            }
            if (betAmount > balance) {
                alert('Insufficient funds. Please enter a lower bet amount.');
                return;
            }
            balance -= betAmount;
            updateBalance();
            dropBall(betAmount);
        }

        function dropBall(betAmount) {
            let x = canvas.width / 2;
            let y = 0;
            let dx = 0;
            let dy = 0;
            const gravity = 0.1;
            const damping = 0.7;

            // Initialize peg positions for collision detection
            pegs = [];
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols - (i % 2); j++) {
                    let pegX = (j * canvas.width) / (cols - 1) + ((i % 2) * canvas.width) / (cols * 2);
                    let pegY = (i * canvas.height) / rows;
                    pegs.push({ x: pegX, y: pegY });
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawBoard();

                // Draw ball
                ctx.beginPath();
                ctx.arc(x, y, ballRadius, 0, 2 * Math.PI);
                ctx.fillStyle = '#ff0000';
                ctx.fill();
                ctx.closePath();

                // Apply gravity
                dy += gravity;

                // Update position
                x += dx;
                y += dy;

                // Boundary collision (left and right walls)
                if (x - ballRadius < 0) {
                    x = ballRadius;
                    dx = -dx * damping;
                } else if (x + ballRadius > canvas.width) {
                    x = canvas.width - ballRadius;
                    dx = -dx * damping;
                }

                // Peg collision detection
                for (let peg of pegs) {
                    let distX = x - peg.x;
                    let distY = y - peg.y;
                    let dist = Math.sqrt(distX * distX + distY * distY);
                    if (dist < pegRadius + ballRadius) {
                        // Simple collision response: reflect dx and reduce speed
                        if (distX !== 0) {
                            dx = -dx * damping + (Math.random() - 0.5) * 1.5;
                        } else {
                            dx = (Math.random() - 0.5) * 1.5;
                        }
                        dy = dy * damping;
                        // Move ball out of collision
                        let overlap = pegRadius + ballRadius - dist;
                        x += (distX / dist) * overlap;
                        y += (distY / dist) * overlap;
                    }
                }

                // Check if ball reached bottom
                if (y + ballRadius > canvas.height) {
                    y = canvas.height - ballRadius;
                    const slot = Math.floor(x / (canvas.width / (multipliers.length - 1)));
                    const multiplier = multipliers[slot];
                    const winnings = betAmount * multiplier;
                    balance += winnings;
                    updateBalance();
                    document.getElementById('result').innerText =
                        `Ball landed on ${multiplier}x. You ${winnings > betAmount ? 'won' : 'lost'} $${Math.abs(winnings - betAmount).toFixed(2)}!`;
                    return;
                }

                requestAnimationFrame(animate);
            }

            animate();
        }

        drawBoard();
        updateBalance();
    </script>
</body>
</html>
